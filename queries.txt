CreateCompaniesTable: create table `companies` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `name` varchar(255) not null, `description` text null, `currency` varchar(255) not null default '$') default character set utf8 collate utf8_unicode_ci
CreateRolesTable: create table `roles` (`id` int unsigned not null auto_increment primary key, `position` varchar(255) not null, `company_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreateRolesTable: alter table `roles` add constraint roles_company_id_foreign foreign key (`company_id`) references `companies` (`id`) on delete cascade
CreateRulePropertiesTable: create table `rule_properties` (`id` int unsigned not null auto_increment primary key, `name` varchar(255) not null, `label` varchar(255) not null) default character set utf8 collate utf8_unicode_ci
CreateRuleTriggersTable: create table `rule_triggers` (`id` int unsigned not null auto_increment primary key, `name` varchar(255) not null, `label` varchar(255) not null, `has_limit` tinyint(1) not null default '0', `limit_type` varchar(255) null, `rule_property_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreateRuleTriggersTable: alter table `rule_triggers` add constraint rule_triggers_rule_property_id_foreign foreign key (`rule_property_id`) references `rule_properties` (`id`) on delete cascade
CreateUsersTable: create table `users` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `name` varchar(255) not null, `email` varchar(255) not null, `password` varchar(60) null, `remember_token` varchar(100) null, `invite_key` varchar(255) null, `company_id` int unsigned null, `role_id` int unsigned null) default character set utf8 collate utf8_unicode_ci
CreateUsersTable: alter table `users` add constraint users_company_id_foreign foreign key (`company_id`) references `companies` (`id`) on delete cascade
CreateUsersTable: alter table `users` add constraint users_role_id_foreign foreign key (`role_id`) references `roles` (`id`)
CreateUsersTable: alter table `users` add unique `users_email_unique`(`email`)
CreateUsersTable: alter table `users` add unique `users_invite_key_unique`(`invite_key`)
CreatePasswordResetsTable: create table `password_resets` (`email` varchar(255) not null, `token` varchar(255) not null, `created_at` timestamp not null) default character set utf8 collate utf8_unicode_ci
CreatePasswordResetsTable: alter table `password_resets` add index `password_resets_email_index`(`email`)
CreatePasswordResetsTable: alter table `password_resets` add index `password_resets_token_index`(`token`)
CreateProjectsTable: create table `projects` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `name` varchar(255) not null, `location` varchar(255) not null, `description` text not null, `operational` tinyint(1) not null default '1', `company_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreateProjectsTable: alter table `projects` add constraint projects_company_id_foreign foreign key (`company_id`) references `companies` (`id`) on delete cascade
CreatePermissionsTable: create table `permissions` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `name` varchar(255) not null, `label` varchar(255) null) default character set utf8 collate utf8_unicode_ci
CreatePermissionRoleTable: create table `permission_role` (`permission_id` int unsigned not null, `role_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreatePermissionRoleTable: alter table `permission_role` add constraint permission_role_permission_id_foreign foreign key (`permission_id`) references `permissions` (`id`) on delete cascade
CreatePermissionRoleTable: alter table `permission_role` add constraint permission_role_role_id_foreign foreign key (`role_id`) references `roles` (`id`) on delete cascade
CreatePermissionRoleTable: alter table `permission_role` add primary key `permission_role_permission_id_role_id_primary`(`permission_id`, `role_id`)
CreateProjectUserTable: create table `project_user` (`project_id` int unsigned not null, `user_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreateProjectUserTable: alter table `project_user` add constraint project_user_project_id_foreign foreign key (`project_id`) references `projects` (`id`) on delete cascade
CreateProjectUserTable: alter table `project_user` add constraint project_user_user_id_foreign foreign key (`user_id`) references `users` (`id`) on delete cascade
CreateProjectUserTable: alter table `project_user` add primary key `project_user_project_id_user_id_primary`(`project_id`, `user_id`)
CreateItemsTable: create table `items` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `sku` varchar(255) null, `brand` varchar(255) null, `name` varchar(255) not null, `specification` text not null, `company_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreateItemsTable: alter table `items` add constraint items_company_id_foreign foreign key (`company_id`) references `companies` (`id`) on delete cascade
CreatePurchaseRequestsTable: create table `purchase_requests` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `quantity` int not null, `due` datetime not null, `state` varchar(255) not null default 'open', `urgent` tinyint(1) not null default '0', `item_id` int unsigned null, `project_id` int unsigned not null, `user_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreatePurchaseRequestsTable: alter table `purchase_requests` add constraint purchase_requests_item_id_foreign foreign key (`item_id`) references `items` (`id`)
CreatePurchaseRequestsTable: alter table `purchase_requests` add constraint purchase_requests_project_id_foreign foreign key (`project_id`) references `projects` (`id`)
CreatePurchaseRequestsTable: alter table `purchase_requests` add constraint purchase_requests_user_id_foreign foreign key (`user_id`) references `users` (`id`)
CreateVendorsTable: create table `vendors` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `name` varchar(255) not null, `phone` varchar(255) not null, `address` varchar(255) not null, `bank_name` varchar(255) not null, `bank_account_name` varchar(255) not null, `bank_account_number` varchar(255) not null) default character set utf8 collate utf8_unicode_ci
CreatePurchaseOrdersTable: create table `purchase_orders` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `status` varchar(255) not null default 'pending', `submitted` tinyint(1) not null default '0', `total` double(15, 2) not null default '0', `project_id` int unsigned not null, `vendor_id` int unsigned null, `user_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreatePurchaseOrdersTable: alter table `purchase_orders` add constraint purchase_orders_user_id_foreign foreign key (`user_id`) references `users` (`id`)
CreatePurchaseOrdersTable: alter table `purchase_orders` add constraint purchase_orders_project_id_foreign foreign key (`project_id`) references `projects` (`id`)
CreatePurchaseOrdersTable: alter table `purchase_orders` add constraint purchase_orders_vendor_id_foreign foreign key (`vendor_id`) references `vendors` (`id`)
CreateLineItemsTable: create table `line_items` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `quantity` int not null, `price` double(15, 2) not null, `payable` datetime not null, `delivery` datetime not null, `delivered` tinyint(1) not null default '0', `paid` tinyint(1) not null default '0', `status` varchar(255) not null default 'unreceived', `purchase_order_id` int unsigned not null, `purchase_request_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreateLineItemsTable: alter table `line_items` add constraint line_items_purchase_order_id_foreign foreign key (`purchase_order_id`) references `purchase_orders` (`id`)
CreateLineItemsTable: alter table `line_items` add constraint line_items_purchase_request_id_foreign foreign key (`purchase_request_id`) references `purchase_requests` (`id`)
CreateItemProjectTable: create table `item_project` (`item_id` int unsigned not null, `project_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreateItemProjectTable: alter table `item_project` add constraint item_project_item_id_foreign foreign key (`item_id`) references `items` (`id`) on delete cascade
CreateItemProjectTable: alter table `item_project` add constraint item_project_project_id_foreign foreign key (`project_id`) references `projects` (`id`) on delete cascade
CreateItemProjectTable: alter table `item_project` add primary key `item_project_item_id_project_id_primary`(`item_id`, `project_id`)
CreatePhotosTable: create table `photos` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `name` varchar(255) not null, `path` varchar(255) not null, `thumbnail_path` varchar(255) null, `model_id` int unsigned not null, `model_type` varchar(255) not null) default character set utf8 collate utf8_unicode_ci
CreateRulesTable: create table `rules` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `limit` varchar(255) null, `rule_property_id` int unsigned not null, `rule_trigger_id` int unsigned not null, `company_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreateRulesTable: alter table `rules` add constraint rules_rule_property_id_foreign foreign key (`rule_property_id`) references `rule_properties` (`id`) on delete cascade
CreateRulesTable: alter table `rules` add constraint rules_rule_trigger_id_foreign foreign key (`rule_trigger_id`) references `rule_triggers` (`id`) on delete cascade
CreateRulesTable: alter table `rules` add constraint rules_company_id_foreign foreign key (`company_id`) references `companies` (`id`) on delete cascade
CreatePurchaseOrderRuleTable: create table `purchase_order_rule` (`purchase_order_id` int unsigned not null, `rule_id` int unsigned not null) default character set utf8 collate utf8_unicode_ci
CreatePurchaseOrderRuleTable: alter table `purchase_order_rule` add constraint purchase_order_rule_purchase_order_id_foreign foreign key (`purchase_order_id`) references `purchase_orders` (`id`) on delete cascade
CreatePurchaseOrderRuleTable: alter table `purchase_order_rule` add constraint purchase_order_rule_rule_id_foreign foreign key (`rule_id`) references `rules` (`id`) on delete cascade
CreateRoleRule: create table `role_rule` (`id` int unsigned not null auto_increment primary key, `created_at` timestamp not null, `updated_at` timestamp not null, `role_id` int unsigned not null, `rule_id` int unsigned not null) default character set utf8 collatrandomse utf8_unicode_ci
CreateRoleRule: alter table `role_rule` add constraint role_rule_role_id_foreign foreign key (`role_id`) references `roles` (`id`) on delete cascade
CreateRoleRule: alter table `role_rule` add constraint role_rule_rule_id_foreign foreign key (`rule_id`) references `rules` (`id`) on delete cascade
